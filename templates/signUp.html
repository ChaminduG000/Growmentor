
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Sign Up</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="static/css/signUp.css">
  <link rel="stylesheet" href="static/css/style.css">

</head>
<style>
       .logo-img {
    max-width: 300px;
    height: 50px;
}
</style>
<body>
    <div class="mainWrapper sticky" id="main">
        <div class="centerWrapper" id="center">
            <div class="leftWrapper" id="left">
                <div class="navLogo" id="logoNav">
                    <a href="#home">
                        <img src="static/css/images/logo2.png" alt="" class="logo-img">
                    </a>
                </div>
                <div class="menuWrapper" id="menuW">
                    <ul>
                        <li><a class="active" href="index.html">Home</a></li>
                        <li><a href="#service">Service</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>
            </div>
            <div class="rightWrapper" id="right">
                <div class="loginAndSignUp" id="lasp">
                    <ul>
                        <li><a href="login">Login</a></li>
                        <li><a href="signUp">Sign Up</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    {% with messages = get_flashed_messages() %}
  {% if messages %}
    <div class="alert alert-info">
      <ul>
        {% for message in messages %}
          <li>{{ message }} <a href="login"
            class="fw text-danger"><u> Login here</u></a> </p></li> 
        {% endfor %}
      </ul>
    </div>
  {% endif %}
{% endwith %}

    <!-- Form Section -->
    <div class="container">
        <div class="blur">
        <h2 class="text-center">Sign Up</h2>
        <img src="static/css/images/logo2.png" alt="" class="logo-img">
        <form action="signUp" method="POST">
            
            <div class="mb-3 mt-3">
                <label class="fw-bold" for="FName">First Name:</label>
                <input type="text" class="form-control" id="fName" placeholder="First Name" name="first_name">
            </div>
            <div class="mb-3 mt-3">
                <label class="fw-bold" for="LName">Last Name:</label>
                <input type="text" class="form-control" id="lName" placeholder="Last Name" name="last_name">
            </div>
            <div class="mb-3">
                <label class="fw-bold" for="phnnumber">Phone Number:</label>
                <input type="tel" class="form-control" id="number" placeholder="Enter Phone Number" name="phone_number" required>
                <small id="phnNoHelp" class="form-text text-muted">Format: +94XXXXXXXXX</small>
            </div>
            
            
            <div id="recaptcha-container"></div>
            <div class="mb-3">
                <button type="button" onclick="phoneAuth();" class="btn btn-primary" id="sendOTP">Send OTP</button>
            </div>
        
            <div class="mb-3">
                <label class="fw-bold" for="otp">Enter OTP:</label>
                <input type="text" class="form-control" id="otp" placeholder="Enter OTP" name="otp">
            </div>
            
            <div class="mb-3">
                <button type="button" onclick="codeverify();" class="btn btn-primary" id="verifyOTP">Verify OTP</button>
            </div>
            <div class="mb-3">
                <label class="fw-bold" for="pwd" class="form-label">Password:</label>
                <input type="password" class="form-control" id="pwd" placeholder="Enter password" name="password" required>
                <div id="password-strength" class="text-muted"></div>
                <small id="passHelp" class="form-text text-muted">Add Symbols or Capital letters for increase password strenth </small>
            </div>
	        
            
<div class="form-check d-flex justify-content-center mt-3 mb-3">
    <input class="form-check-input me-2" type="checkbox" value="" id="checkBox" required>
    <label class="form-check-label" for="signUpPage">
        I agree to all statements in <a href="#" class="text-body"><u>Terms & Conditions</u></a>
    </label>
</div>
            <div class="col-md-12 text-center">
                
                <button type="submit" class="btn btn-primary" id="submitBtn" disabled>Submit</button>
                </form>
            </div>
            
            <p class="text-center  mt-4 mb-3">Have already an account? <a href="login"
                class="fw text-danger"><u> Login here</u></a> <div class="text-center">
                    <h2 class="text-center">---------------------------------------</h2><div class="text-center">
                    <h2 class="text-center">Knowledge Hub</h2> <p class="text-center text-muted">Explore our Knowledge Hub to gain insights about plant growing and controlling plant diseases.</p><a href="http://localhost/growmentor/Knowledge_base/" class="btn btn-success" target="_blank">
                        <i class="bi bi-book"></i> Register with Knowledge Hub
                    </a>  <h2 class="text-center">---------------------------------------</h2></p>
        </form>
       
    </div>
   
    </div>
    </div>
</body>
<script>
   // Get the input element by its ID
const phoneNumberInput = document.getElementById('number');

// Set the initial value to "+94" when the page loads
phoneNumberInput.value = '+94';

// Check and ensure that the country code remains at the beginning
phoneNumberInput.addEventListener('input', function() {
    if (!phoneNumberInput.value.startsWith('+94')) {
        phoneNumberInput.value = '+94' + phoneNumberInput.value.substring(3); // Ensures the country code remains at the beginning
    }
});

    </script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        var phoneNumberInput = document.getElementById("phnNo");
        
        phoneNumberInput.addEventListener("input", function () {
            var phoneNumber = phoneNumberInput.value;
            
           
            
            // Check if the phone number starts with +94 and has exactly 9 numbers
            if (/^\+94\d{9}$/.test(phoneNumber)) {
                phoneNumberInput.setCustomValidity("");
            } else {
                phoneNumberInput.setCustomValidity("Phone number must be in the format +94XXXXXXXXX ");
            }
        });
    });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var passwordInput = document.getElementById("pwd");
            var passwordStrengthIndicator = document.getElementById("password-strength");
        
            passwordInput.addEventListener("input", function () {
                var password = passwordInput.value;
        
                // Regular expressions to check for uppercase letter and symbol
                var uppercaseRegex = /[A-Z]/;
                var symbolRegex = /[!@#$%^&*()_+{}\[\]:;<>,.?~\\-]/;
        
                // Check for uppercase letter
                var hasUppercase = uppercaseRegex.test(password);
        
                // Check for symbol
                var hasSymbol = symbolRegex.test(password);
        
                // Check password length
                var isLengthValid = password.length >= 8;
        
                // Determine password strength
                if (isLengthValid && hasUppercase && hasSymbol) {
                    passwordStrengthIndicator.textContent = "Strong";
                    passwordStrengthIndicator.style.color = "green";
                } else {
                    passwordStrengthIndicator.textContent = "Weak";
                    passwordStrengthIndicator.style.color = "red";
                }
            });
        });
        </script>
        <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase.js"></script>
        <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyCVRukU5pVNuiiwM4TXnRVoIgwXL3MDzcU",
            authDomain: "tutorial-23a16.firebaseapp.com",
            projectId: "tutorial-23a16",
            storageBucket: "tutorial-23a16.appspot.com",
            messagingSenderId: "847486915814",
            appId: "1:847486915814:web:1857746367a67601279727",
            measurementId: "G-HCT5HQ6619"
        };
    
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
         firebase.analytics();
    </script>
        <script src="NumberAuthentication.js" type="text/javascript"></script>
        <script>
            window.onload = function() {
                render();
            };
            
            function render() {
                window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container');
                recaptchaVerifier.render();
            }
            
            function phoneAuth() {
    var phoneNumber = document.getElementById('number').value;
    var appVerifier = window.recaptchaVerifier;

    firebase.auth().signInWithPhoneNumber(phoneNumber, appVerifier)
        .then(function (confirmationResult) {
            window.confirmationResult = confirmationResult;
            alert("OTP sent successfully");
            // Handle successful OTP request
        })
        .catch(function (error) {
            // Handle errors
            alert("Error sending OTP: " + error);
        });
}

            
function codeverify() {
    var code = document.getElementById('otp').value; // Assuming OTP input ID is 'otp'
    confirmationResult.confirm(code)
        .then(function (result) {
            alert("Successfully registered with phone number: " + result.user.phoneNumber);
            // You can now proceed with user registration
        })
        .catch(function (error) {
            alert("Error verifying OTP: " + error);
        });
}
            </script>
</html>
