
<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check Plant Disease</title>
    <!-- Link to your service-specific CSS file -->
    <link rel="stylesheet" href="static/css/style.css">
    <style>
        /* Center the entire page content */
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        /* Center the main content */
        .mainServiceWrapper {
            text-align: center;
        }

        /* Center the uploaded image */
        #uploadedImage {
            max-width: 100%;
            max-height: 100%;
            border-radius: 10px; /* Add border-radius for a better appearance */
        }

        /* Center the heading */
        .headingService {
            font-weight: bold;
        }

        /* Style for the blur box section */
        .blurBox {
            border: 5px solid #fff6f600;
            background-color: #e6e6e634;
            border-radius: 10px;
            margin: 20px;
        }

        /* Media query for small screens (e.g., mobile devices) */
        @media (max-width: 768px) {
            .blurBox {
                width: 90%; /* Adjust the width for smaller screens */
                height: auto; /* Let the height adjust based on content */
            }
        }

        /* Button color */
        input[type="submit"] {
            background-color: #225313; /* Light green button color */
            color: #fff; /* Text color */
            font-size: 18px; /* Increase font size */
            padding: 10px 20px; /* Increase padding */
            border: none; /* Remove border */
            border-radius: 5px; /* Add border-radius for a better appearance */
            font-weight: bold; /* Make the text bold */
        }

        /* Button hover effect */
        input[type="submit"]:hover {
            background-color: #0f3c2e; /* Dark green hover color */
        }
        .back-button {
    display: inline-block;
    margin-top: 20px; /* Add spacing from the content above */
    font-size: 18px;
    text-decoration: none; /* Remove underline from the anchor text */
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    background-color: #225313; /* Set the button color */
    color: #fff; /* Text color */
    font-weight: bold;
    transition: background-color 0.3s; /* Add a smooth transition effect */
}

.back-button:hover {
    background-color: #0f3c2e; /* Darker color on hover */
}

        #uploadedImage {
    width: 300px; /* Set the width to 400 pixels */
    height: 300px; /* Set the height to 400 pixels */
    object-fit: cover; /* Maintain aspect ratio and cover the container */
    border-radius: 10px; /* Add border-radius for a better appearance */
}
/* Add this to your existing styles */
#flash-messages {
    position: fixed;
    top: 0;
    width: 100%;
    text-align: center;
    z-index: 1000;
}

.flash-message {
    padding: 5px;
    margin: 5px;
    background-color: #ff0000; /* Choose the background color you prefer */
    color: #ffffff; /* Choose the text color you prefer */
    border-radius: 5px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}
 /* Add this style for the notice bar */
 .notice-message {
        background-color: #0000001b; /* Green background color */
        color: #ffffff; /* Text color */
        text-align: center;
        padding: 5px;
        font-weight: bold;
    }
    </style>
    
    
 
</head>

<body>
  
  {% with messages = get_flashed_messages() %}
  {% if messages %}
    <div id="flash-messages">
      {% for message in messages %}
        <div class="flash-message">{{ message }}</div>
        
      {% endfor %}
    </div>
    
  {% endif %}
{% endwith %}

    <!-- Service Section -->
    <section class="serviceSection" id="service"><br>
      
      <div class="mainServiceWrapper">
        <h1 class="headingService p-4 d-flex justify-content-center text-center">Check Plant Disease</h1>
        
        <div class="blurBox d-flex justify-content-center align-items-center">
          <img id="uploadedImage" src="#" alt="Uploaded Image">
        </div>
        <div class="row-sm p-sm-5">
          <div class="col-sm-12 p-sm-5">
            
            <p class="text-center">
              <h3 class="text-center">
                <font color="white">Upload high-quality images of plants to accurately predict diseases</font>
              </h3>
              
            </p>
            <p>
              <h4 class="text-center">
                <font color="white">Upload Image file</font>
              </h4>
            </p>
            <div class="d-flex justify-content-center">
              <form id="uploadForm" method="post" enctype="multipart/form-data">
                <input type="file" name="file" id="fileInput">
                <input type="submit" value="Check Now" id="uploadButton">
              </form>
            </div>
          </div>
         
        </div>
        <a href="#" onclick="history.go(-1); return false;" class="back-button">
          <i class="fas fa-arrow-left"></i> 
        </a>
      </div>
    </section>

    <!-- Link to your service-specific JavaScript file -->
    <script src="static/js/index.js"></script>
    <script>
       
      
   // Function to display the uploaded image
function displayImage() {
    const fileInput = document.getElementById('fileInput');
    const uploadedImage = document.getElementById('uploadedImage');
    const uploadForm = document.getElementById('uploadForm');

    fileInput.addEventListener('change', function () {
        const file = fileInput.files[0];

        // Check file extension (case-insensitive)
        const allowedExtensions = ['png', 'jpg', 'jpeg'];
        const fileExtension = file.name.split('.').pop().toLowerCase();

        if (!allowedExtensions.includes(fileExtension)) {
            // Display flash message for invalid file extension
            displayFlashMessage('Invalid file extension. Allowed extensions are: ' + allowedExtensions.join(', ').toUpperCase());
            // Clear the file input
            uploadForm.reset();
            return;
        }

        // Check image quality (you can adjust this threshold as needed)
        const imageQualityThreshold = 0.8; // Example: 80%
        const reader = new FileReader();

        reader.onload = function (e) {
            const img = new Image();
            img.src = e.target.result;

            img.onload = function () {
                const imageQuality = calculateImageQuality(img, file.size);
                if (imageQuality < imageQualityThreshold) {
                    // Display flash message for low image quality
                    displayFlashMessage('Low image quality. Please upload a higher-quality image.');
                    // Clear the file input
                    uploadForm.reset();
                    return;
                }

                // Display the uploaded image
                uploadedImage.src = e.target.result;
            };
        };

        reader.readAsDataURL(file);
    });
}

// Function to display flash messages
function displayFlashMessage(message) {
    const flashMessages = document.getElementById('flash-messages');
    const flashMessage = document.createElement('div');
    flashMessage.classList.add('flash-message');
    flashMessage.textContent = message;
    flashMessages.appendChild(flashMessage);

    // Hide flash messages after 5 seconds
    setTimeout(function () {
        flashMessage.style.display = 'none';
    }, 5000);
}

// Attach event listeners
document.addEventListener('DOMContentLoaded', function () {
    displayImage();
    hideFlashMessages(); // Call the function to hide flash messages
});
    </script>
</body>
</html>
